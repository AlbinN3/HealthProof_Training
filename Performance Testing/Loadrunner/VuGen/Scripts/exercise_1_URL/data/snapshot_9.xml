<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="9">
  <HTTPTask id="127" hostname="blazedemo.com" path="/assets/bootstrap-table.js" url="https://blazedemo.com/assets/bootstrap-table.js" ip="216.239.34.21" port="443" connectionId="3" origin="Primary" frame="1" startDateTime="2025-12-04T10:33:10.508+05:30" startTime="5123000" endTime="5123421">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Host" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YmxhemVkZW1vLmNvbQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NDsgcnY6MTQ1LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTQ1LjA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnIsIHpzdGQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-GPC" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9ibGF6ZWRlbW8uY29tLw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Dest" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2NyaXB0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Mode" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY29ycw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Site" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2FtZS1vcmlnaW4=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Priority" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dT0y</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9hc3NldHMvYm9vdHN0cmFwLXRhYmxlLmpzIEhUVFAvMS4xDQpIb3N0OiBibGF6ZWRlbW8uY29tDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0OyBydjoxNDUuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xNDUuMA0KQWNjZXB0OiAqLyoNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjUNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZSwgYnIsIHpzdGQNClNlYy1HUEM6IDENCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNClJlZmVyZXI6IGh0dHBzOi8vYmxhemVkZW1vLmNvbS8NClNlYy1GZXRjaC1EZXN0OiBzY3JpcHQNClNlYy1GZXRjaC1Nb2RlOiBuby1jb3JzDQpTZWMtRmV0Y2gtU2l0ZTogc2FtZS1vcmlnaW4NClByaW9yaXR5OiB1PTINCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>0</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="last-modified" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAzMCBBdWcgMjAyMiAxNDoyNjoxMiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="etag" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ijk5MDItNWU3NzYyOTgwODkwMC1nemlwIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="accept-ranges" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="vary" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="content-type" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="content-encoding" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="x-cloud-trace-context" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MDc2NzUyNjlhNjM3OWRhYjdjOTU0NDU5Yjk2YWM1Zjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="date" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAwNCBEZWMgMjAyNSAwNToyNjowMyBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="server" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R29vZ2xlIEZyb250ZW5k</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Transfer-Encoding" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2h1bmtlZA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpsYXN0LW1vZGlmaWVkOiBUdWUsIDMwIEF1ZyAyMDIyIDE0OjI2OjEyIEdNVA0KZXRhZzogIjk5MDItNWU3NzYyOTgwODkwMC1nemlwIg0KYWNjZXB0LXJhbmdlczogYnl0ZXMNCnZhcnk6IEFjY2VwdC1FbmNvZGluZw0KY29udGVudC10eXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpjb250ZW50LWVuY29kaW5nOiBnemlwDQp4LWNsb3VkLXRyYWNlLWNvbnRleHQ6IDA3Njc1MjY5YTYzNzlkYWI3Yzk1NDQ1OWI5NmFjNWY5DQpkYXRlOiBUaHUsIDA0IERlYyAyMDI1IDA1OjI2OjAzIEdNVA0Kc2VydmVyOiBHb29nbGUgRnJvbnRlbmQNClRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>LyoqCiAqIEBhdXRob3IgemhpeGluIHdlbiA8d2VuemhpeGluMjAxMEBnbWFpbC5jb20+CiAqIHZlcnNpb246IDEuMS40CiAqIGh0dHBzOi8vZ2l0aHViLmNvbS93ZW56aGl4aW4vYm9vdHN0cmFwLXRhYmxlLwogKi8KCiFmdW5jdGlvbiAoJCkgewoKICAgICd1c2Ugc3RyaWN0JzsKCiAgICAvLyBUT09MUyBERUZJTklUSU9OCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09CgogICAgLy8gaXQgb25seSBkb2VzICclcycsIGFuZCByZXR1cm4gJycgd2hlbiBhcmd1bWVudHMgYXJlIHVuZGVmaW5lZAogICAgdmFyIHNwcmludGYgPSBmdW5jdGlvbihzdHIpIHsKICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cywKICAgICAgICAgICAgZmxhZyA9IHRydWUsCiAgICAgICAgICAgIGkgPSAxOwoKICAgICAgICBzdHIgPSBzdHIucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgYXJnID0gYXJnc1tpKytdOwoKICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGFyZzsKICAgICAgICB9KTsKICAgICAgICBpZiAoZmxhZykgewogICAgICAgICAgICByZXR1cm4gc3RyOwogICAgICAgIH0KICAgICAgICByZXR1cm4gJyc7CiAgICB9OwoKICAgIHZhciBnZXRQcm9wZXJ0eUZyb21PdGhlciA9IGZ1bmN0aW9uIChsaXN0LCBmcm9tLCB0bywgdmFsdWUpIHsKICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CiAgICAgICAgJC5lYWNoKGxpc3QsIGZ1bmN0aW9uIChpLCBpdGVtKSB7CiAgICAgICAgICAgIGlmIChpdGVtW2Zyb21dID09PSB2YWx1ZSkgewogICAgICAgICAgICAgICAgcmVzdWx0ID0gaXRlbVt0b107CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH07CgogICAgdmFyIGdldFNjcm9sbGJhcldpZHRoID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBpbm5lciA9ICQoJzxwLz4nKS5hZGRDbGFzcygnZml4ZWQtdGFibGUtc2Nyb2xsLWlubmVyJyksCiAgICAgICAgICAgIG91dGVyID0gJCgnPGRpdi8+JykuYWRkQ2xhc3MoJ2ZpeGVkLXRhYmxlLXNjcm9sbC1vdXRlcicpLAogICAgICAgICAgICB3MSwgdzI7CgogICAgICAgIG91dGVyLmFwcGVuZChpbm5lcik7CiAgICAgICAgJCgnYm9keScpLmFwcGVuZChvdXRlcik7CgogICAgICAgIHcxID0gaW5uZXJbMF0ub2Zmc2V0V2lkdGg7CiAgICAgICAgb3V0ZXIuY3NzKCdvdmVyZmxvdycsICdzY3JvbGwnKTsKICAgICAgICB3MiA9IGlubmVyWzBdLm9mZnNldFdpZHRoOwoKICAgICAgICBpZiAodzEgPT0gdzIpIHsKICAgICAgICAgICAgdzIgPSBvdXRlclswXS5jbGllbnRXaWR0aDsKICAgICAgICB9CgogICAgICAgIG91dGVyLnJlbW92ZSgpOwogICAgICAgIHJldHVybiB3MSAtIHcyOwogICAgfTsKCiAgICAvLyBCT09UU1RSQVAgVEFCTEUgQ0xBU1MgREVGSU5JVElPTgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PQoKICAgIHZhciBCb290c3RyYXBUYWJsZSA9IGZ1bmN0aW9uIChlbCwgb3B0aW9ucykgewogICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CiAgICAgICAgdGhpcy4kZWwgPSAkKGVsKTsKICAgICAgICB0aGlzLiRlbF8gPSB0aGlzLiRlbC5jbG9uZSgpOwogICAgICAgIHRoaXMudGltZW91dElkXyA9IDA7CgogICAgICAgIHRoaXMuaW5pdCgpOwogICAgfTsKCiAgICBCb290c3RyYXBUYWJsZS5ERUZBVUxUUyA9IHsKICAgICAgICBjbGFzc2VzOiAndGFibGUgdGFibGUtaG92ZXInLAogICAgICAgIGhlaWdodDogdW5kZWZpbmVkLAogICAgICAgIHVuZGVmaW5lZFRleHQ6ICctJywKICAgICAgICBzb3J0TmFtZTogdW5kZWZpbmVkLAogICAgICAgIHNvcnRPcmRlcjogJ2FzYycsCiAgICAgICAgc3RyaXBlZDogZmFsc2UsCiAgICAgICAgY29sdW1uczogW10sCiAgICAgICAgZGF0YTogW10sCiAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICB1cmw6IHVuZGVmaW5lZCwKICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgIHF1ZXJ5UGFyYW1zOiBmdW5jdGlvbiAocGFyYW1zKSB7cmV0dXJuIHt9O30sCiAgICAgICAgcXVlcnlQYXJhbXNUeXBlOiB1bmRlZmluZWQsCiAgICAgICAgcmVzcG9uc2VIYW5kbGVyOiBmdW5jdGlvbiAocmVzKSB7cmV0dXJuIHJlczt9LAogICAgICAgIHBhZ2luYXRpb246IGZhbHNlLAogICAgICAgIHNpZGVQYWdpbmF0aW9uOiAnY2xpZW50JywgLy8gY2xpZW50IG9yIHNlcnZlcgogICAgICAgIHRvdGFsUm93czogMCwgLy8gc2VydmVyIHNpZGUgbmVlZCB0byBzZXQKICAgICAgICBwYWdlTnVtYmVyOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICBwYWdlTGlzdDogWzEwLCAyNSwgNTAsIDEwMF0sCiAgICAgICAgc2VhcmNoOiBmYWxzZSwKICAgICAgICBzZWxlY3RJdGVtTmFtZTogJ2J0U2VsZWN0SXRlbScsCiAgICAgICAgc2hvd0hlYWRlcjogdHJ1ZSwKICAgICAgICBzaG93Q29sdW1uczogZmFsc2UsCiAgICAgICAgbWluaW11bkNvdW50Q29sdW1uczogMSwKICAgICAgICBpZEZpZWxkOiB1bmRlZmluZWQsCiAgICAgICAgY2FyZFZpZXc6IGZhbHNlLAogICAgICAgIGNsaWNrVG9TZWxlY3Q6IGZhbHNlLAogICAgICAgIHNpbmdsZVNlbGVjdDogZmFsc2UsCiAgICAgICAgdG9vbGJhcjogdW5kZWZpbmVkLAogICAgICAgIGNoZWNrYm94SGVhZGVyOiB0cnVlLAoKICAgICAgICByb3dTdHlsZTogZnVuY3Rpb24gKHJvdywgaW5kZXgpIHtyZXR1cm4ge307fSwKCiAgICAgICAgZm9ybWF0TG9hZGluZ01lc3NhZ2U6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuICdMb2FkaW5nLCBwbGVhc2Ugd2FpdOKApic7CiAgICAgICAgfSwKICAgICAgICBmb3JtYXRSZWNvcmRzUGVyUGFnZTogZnVuY3Rpb24gKHBhZ2VOdW1iZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHNwcmludGYoJyVzIHJlY29yZHMgcGVyIHBhZ2UnLCBwYWdlTnVtYmVyKTsKICAgICAgICB9LAogICAgICAgIGZvcm1hdFNob3dpbmdSb3dzOiBmdW5jdGlvbiAocGFnZUZyb20sIHBhZ2VUbywgdG90YWxSb3dzKSB7CiAgICAgICAgICAgIHJldHVybiBzcHJpbnRmKCdTaG93aW5nICVzIHRvICVzIG9mICVzIHJvd3MnLCBwYWdlRnJvbSwgcGFnZVRvLCB0b3RhbFJvd3MpOwogICAgICAgIH0sCiAgICAgICAgZm9ybWF0U2VhcmNoOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiAnU2VhcmNoJzsKICAgICAgICB9LAogICAgICAgIGZvcm1hdE5vTWF0Y2hlczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gJ05vIG1hdGNoaW5nIHJlY29yZHMgZm91bmQnOwogICAgICAgIH0sCgogICAgICAgIG9uQWxsOiBmdW5jdGlvbiAobmFtZSwgYXJncykge3JldHVybiBmYWxzZTt9LAogICAgICAgIG9uQ2xpY2tSb3c6IGZ1bmN0aW9uIChpdGVtLCAkZWxlbWVudCkge3JldHVybiBmYWxzZTt9LAogICAgICAgIG9uRGJsQ2xpY2tSb3c6IGZ1bmN0aW9uIChpdGVtLCAkZWxlbWVudCkge3JldHVybiBmYWxzZTt9LAogICAgICAgIG9uU29ydDogZnVuY3Rpb24gKG5hbWUsIG9yZGVyKSB7cmV0dXJuIGZhbHNlO30sCiAgICAgICAgb25DaGVjazogZnVuY3Rpb24gKHJvdykge3JldHVybiBmYWxzZTt9LAogICAgICAgIG9uVW5jaGVjazogZnVuY3Rpb24gKHJvdykge3JldHVybiBmYWxzZTt9LAogICAgICAgIG9uQ2hlY2tBbGw6IGZ1bmN0aW9uICgpIHtyZXR1cm4gZmFsc2U7fSwKICAgICAgICBvblVuY2hlY2tBbGw6IGZ1bmN0aW9uICgpIHtyZXR1cm4gZmFsc2U7fSwKICAgICAgICBvbkxvYWRTdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge3JldHVybiBmYWxzZTt9LAogICAgICAgIG9uTG9hZEVycm9yOiBmdW5jdGlvbiAoc3RhdHVzKSB7cmV0dXJuIGZhbHNlO30KICAgIH07CgogICAgQm9vdHN0cmFwVGFibGUuQ09MVU1OX0RFRkFVTFRTID0gewogICAgICAgIHJhZGlvOiBmYWxzZSwKICAgICAgICBjaGVja2JveDogZmFsc2UsCiAgICAgICAgZmllbGQ6IHVuZGVmaW5lZCwKICAgICAgICB0aXRsZTogdW5kZWZpbmVkLAogICAgICAgICdjbGFzcyc6IHVuZGVmaW5lZCwKICAgICAgICBhbGlnbjogdW5kZWZpbmVkLCAvLyBsZWZ0LCByaWdodCwgY2VudGVyCiAgICAgICAgdmFsaWduOiB1bmRlZmluZWQsIC8vIHRvcCwgbWlkZGxlLCBib3R0b20KICAgICAgICB3aWR0aDogdW5kZWZpbmVkLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICBvcmRlcjogJ2FzYycsIC8vIGFzYywgZGVzYwogICAgICAgIHZpc2libGU6IHRydWUsCiAgICAgICAgc3dpdGNoYWJsZTogdHJ1ZSwKICAgICAgICBmb3JtYXR0ZXI6IHVuZGVmaW5lZCwKICAgICAgICBldmVudHM6IHVuZGVmaW5lZCwKICAgICAgICBzb3J0ZXI6IHVuZGVmaW5lZAogICAgfTsKCiAgICBCb290c3RyYXBUYWJsZS5FVkVOVFMgPSB7CiAgICAgICAgJ2FsbC5icy50YWJsZSc6ICdvbkFsbCcsCiAgICAgICAgJ2NsaWNrLXJvdy5icy50YWJsZSc6ICdvbkNsaWNrUm93JywKICAgICAgICAnZGJsLWNsaWNrLXJvdy5icy50YWJsZSc6ICdvbkRibENsaWNrUm93JywKICAgICAgICAnc29ydC5icy50YWJsZSc6ICdvblNvcnQnLAogICAgICAgICdjaGVjay5icy50YWJsZSc6ICdvbkNoZWNrJywKICAgICAgICAndW5jaGVjay5icy50YWJsZSc6ICdvblVuY2hlY2snLAogICAgICAgICdjaGVjay1hbGwuYnMudGFibGUnOiAnb25DaGVja0FsbCcsCiAgICAgICAgJ3VuY2hlY2stYWxsLmJzLnRhYmxlJzogJ29uVW5jaGVja0FsbCcsCiAgICAgICAgJ2xvYWQtc3VjY2Vzcy5icy50YWJsZSc6ICdvbkxvYWRTdWNjZXNzJywKICAgICAgICAnbG9hZC1lcnJvci5icy50YWJsZSc6ICdvbkxvYWRFcnJvcicKICAgIH07CgogICAgQm9vdHN0cmFwVGFibGUucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5pbml0Q29udGFpbmVyKCk7CiAgICAgICAgdGhpcy5pbml0VGFibGUoKTsKICAgICAgICB0aGlzLmluaXRIZWFkZXIoKTsKICAgICAgICB0aGlzLmluaXREYXRhKCk7CiAgICAgICAgdGhpcy5pbml0VG9vbGJhcigpOwogICAgICAgIHRoaXMuaW5pdFBhZ2luYXRpb24oKTsKICAgICAgICB0aGlzLmluaXRCb2R5KCk7CiAgICAgICAgdGhpcy5pbml0U2VydmVyKCk7CiAgICB9OwoKICAgIEJvb3RzdHJhcFRhYmxlLnByb3RvdHlwZS5pbml0Q29udGFpbmVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuJGNvbnRhaW5lciA9ICQoWwogICAgICAgICAgICAnPGRpdiBjbGFzcz0iYm9vdHN0cmFwLXRhYmxlIj4nLAogICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImZpeGVkLXRhYmxlLXRvb2xiYXIiPjwvZGl2PicsCiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iZml4ZWQtdGFibGUtY29udGFpbmVyIj4nLAogICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJmaXhlZC10YWJsZS1oZWFkZXIiPjx0YWJsZT48L3RhYmxlPjwvZGl2PicsCiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImZpeGVkLXRhYmxlLWJvZHkiPicsCiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJmaXhlZC10YWJsZS1sb2FkaW5nIj4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmZvcm1hdExvYWRpbmdNZXNzYWdlKCksCiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nLAogICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nLAogICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJmaXhlZC10YWJsZS1wYWdpbmF0aW9uIj48L2Rpdj4nLAogICAgICAgICAgICAgICAgJzwvZGl2PicsCiAgICAgICAgICAgICc8L2Rpdj4nXS5qb2luKCcnKSk7CgogICAgICAgIHRoaXMuJGNvbnRhaW5lci5pbnNlcnRBZnRlcih0aGlzLiRlbCk7CiAgICAgICAgdGhpcy4kY29udGFpbmVyLmZpbmQoJy5maXhlZC10YWJsZS1ib2R5JykuYXBwZW5kKHRoaXMuJGVsKTsKICAgICAgICB0aGlzLiRjb250YWluZXIuYWZ0ZXIoJzxkaXYgY2xhc3M9ImNsZWFyZml4Ij48L2Rpdj4nKTsKICAgICAgICB0aGlzLiRsb2FkaW5nID0gdGhpcy4kY29udGFpbmVyLmZpbmQoJy5maXhlZC10YWJsZS1sb2FkaW5nJyk7CgogICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKHRoaXMub3B0aW9ucy5jbGFzc2VzKTsKICAgICAgICBpZiAodGhpcy5vcHRpb25zLnN0cmlwZWQpIHsKICAgICAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoJ3RhYmxlLXN0cmlwZWQnKTsKICAgICAgICB9CiAgICB9OwoKICAgIEJvb3RzdHJhcFRhYmxlLnByb3RvdHlwZS5pbml0VGFibGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHRoYXQgPSB0aGlzLAogICAgICAgICAgICBjb2x1bW5zID0gW10sCiAgICAgICAgICAgIGRhdGEgPSBbXTsKCiAgICAgICAgdGhpcy4kaGVhZGVyID0gdGhpcy4kZWwuZmluZCgndGhlYWQnKTsKICAgICAgICBpZiAoIXRoaXMuJGhlYWRlci5sZW5ndGgpIHsKICAgICAgICAgICAgdGhpcy4kaGVhZGVyID0gJCgnPHRoZWFkPjwvdGhlYWQ+JykuYXBwZW5kVG8odGhpcy4kZWwpOwogICAgICAgIH0KICAgICAgICBpZiAoIXRoaXMuJGhlYWRlci5maW5kKCd0cicpLmxlbmd0aCkgewogICAgICAgICAgICB0aGlzLiRoZWFkZXIuYXBwZW5kKCc8dHI+PC90cj4nKTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kaGVhZGVyLmZpbmQoJ3RoJykuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBjb2x1bW4gPSAkLmV4dGVuZCh7fSwgewogICAgICAgICAgICAgICAgdGl0bGU6ICQodGhpcykuaHRtbCgpLAogICAgICAgICAgICAgICAgJ2NsYXNzJzogJCh0aGlzKS5hdHRyKCdjbGFzcycpCiAgICAgICAgICAgIH0sICQodGhpcykuZGF0YSgpKTsKCiAgICAgICAgICAgIGNvbHVtbnMucHVzaChjb2x1bW4pOwogICAgICAgIH0pOwogICAgICAgIHRoaXMub3B0aW9ucy5jb2x1bW5zID0gJC5leHRlbmQoe30sIGNvbHVtbnMsIHRoaXMub3B0aW9ucy5jb2x1bW5zKTsKICAgICAgICAkLmVhY2godGhpcy5vcHRpb25zLmNvbHVtbnMsIGZ1bmN0aW9uIChpLCBjb2x1bW4pIHsKICAgICAgICAgICAgdGhhdC5vcHRpb25zLmNvbHVtbnNbaV0gPSAkLmV4dGVuZCh7fSwgQm9vdHN0cmFwVGFibGUuQ09MVU1OX0RFRkFVTFRTLCBjb2x1bW4pOwogICAgICAgIH0pOwoKICAgICAgICAvLyBpZiBvcHRpb25zLmRhdGEgaXMgc2V0dGluZywgZG8gbm90IHByb2Nlc3MgdGJvZHkgZGF0YQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy4kZWwuZmluZCgndGJvZHkgdHInKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHJvdyA9IHt9OwogICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ3RkJykuZWFjaChmdW5jdGlvbiAoaSkgewogICAgICAgICAgICAgICAgcm93W3RoYXQub3B0aW9ucy5jb2x1bW5zW2ldLmZpZWxkXSA9ICQodGhpcykuaHRtbCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZGF0YS5wdXNoKHJvdyk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5vcHRpb25zLmRhdGEgPSBkYXRhOwogICAgfTsKCiAgICBCb290c3RyYXBUYWJsZS5wcm90b3R5cGUuaW5pdEhlYWRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgdGhhdCA9IHRoaXMsCiAgICAgICAgICAgIHZpc2libGVDb2x1bW5zID0gW10sCiAgICAgICAgICAgIGh0bWwgPSBbXTsKCiAgICAgICAgdGhpcy5oZWFkZXIgPSB7CiAgICAgICAgICAgIGZpZWxkczogW10sCiAgICAgICAgICAgIHN0eWxlczogW10sCiAgICAgICAgICAgIGZvcm1hdHRlcnM6IFtdLAogICAgICAgICAgICBldmVudHM6IFtdLAogICAgICAgICAgICBzb3J0ZXJzOiBbXQogICAgICAgIH07CiAgICAgICAgJC5lYWNoKHRoaXMub3B0aW9ucy5jb2x1bW5zLCBmdW5jdGlvbiAoaSwgY29sdW1uKSB7CiAgICAgICAgICAgIHZhciB0ZXh0ID0gJycsCiAgICAgICAgICAgICAgICBzdHlsZSA9IHNwcmludGYoJ3RleHQtYWxpZ246ICVzOyAnLCBjb2x1bW4uYWxpZ24pICsKICAgICAgICAgICAgICAgICAgICAgICAgc3ByaW50ZigndmVydGljYWwtYWxpZ246ICVzOyAnLCBjb2x1bW4udmFsaWduKSwKICAgICAgICAgICAgICAgIG9yZGVyID0gdGhhdC5vcHRpb25zLnNvcnRPcmRlciB8fCBjb2x1bW4ub3JkZXI7CgogICAgICAgICAgICBpZiAoIWNvbHVtbi52aXNpYmxlKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZpc2libGVDb2x1bW5zLnB1c2goY29sdW1uKTsKICAgICAgICAgICAgdGhhdC5oZWFkZXIuZmllbGRzLnB1c2goY29sdW1uLmZpZWxkKTsKICAgICAgICAgICAgdGhhdC5oZWFkZXIuc3R5bGVzLnB1c2goc3R5bGUpOwogICAgICAgICAgICB0aGF0LmhlYWRlci5mb3JtYXR0ZXJzLnB1c2goY29sdW1uLmZvcm1hdHRlcik7CiAgICAgICAgICAgIHRoYXQuaGVhZGVyLmV2ZW50cy5wdXNoKGNvbHVtbi5ldmVudHMpOwogICAgICAgICAgICB0aGF0LmhlYWRlci5zb3J0ZXJzLnB1c2goY29sdW1uLnNvcnRlcik7CgogICAgICAgICAgICBzdHlsZSArPSBzcHJpbnRmKCd3aWR0aDogJXNweDsgJywgY29sdW1uLmNoZWNrYm94IHx8IGNvbHVtbi5yYWRpbyA/IDM2IDogY29sdW1uLndpZHRoKTsKICAgICAgICAgICAgc3R5bGUgKz0gY29sdW1uLnNvcnRhYmxlID8gJ2N1cnNvcjogcG9pbnRlcjsgJyA6ICcnOwoKICAgICAgICAgICAgaHRtbC5wdXNoKCc8dGgnLAogICAgICAgICAgICAgICAgY29sdW1uLmNoZWNrYm94IHx8IGNvbHVtbi5yYWRpbyA/ICcgY2xhc3M9ImJzLWNoZWNrYm94IicgOgogICAgICAgICAgICAgICAgc3ByaW50ZignIGNsYXNzPSIlcyInLCBjb2x1bW5bJ2NsYXNzJ10pLAogICAgICAgICAgICAgICAgc3ByaW50ZignIHN0eWxlPSIlcyInLCBzdHlsZSksCiAgICAgICAgICAgICAgICAnPicpOwogICAgICAgICAgICBodG1sLnB1c2goJzxkaXYgY2xhc3M9InRoLWlubmVyIj4nKTsKCiAgICAgICAgICAgIHRleHQgPSBjb2x1bW4udGl0bGU7CiAgICAgICAgICAgIGlmICh0aGF0Lm9wdGlvbnMuc29ydE5hbWUgPT09IGNvbHVtbi5maWVsZCAmJiBjb2x1bW4uc29ydGFibGUpIHsKICAgICAgICAgICAgICAgIHRleHQgKz0gdGhhdC5nZXRDYXJldEh0bWwoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGNvbHVtbi5jaGVja2JveCkgewogICAgICAgICAgICAgICAgaWYgKCF0aGF0Lm9wdGlvbnMuc2luZ2xlU2VsZWN0ICYmIHRoYXQub3B0aW9ucy5jaGVja2JveEhlYWRlcikgewogICAgICAgICAgICAgICAgICAgIHRleHQgPSAnPGlucHV0IG5hbWU9ImJ0U2VsZWN0QWxsIiB0eXBlPSJjaGVja2JveCIgLz4nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhhdC5oZWFkZXIuc3RhdGVGaWVsZCA9IGNvbHVtbi5maWVsZDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY29sdW1uLnJhZGlvKSB7CiAgICAgICAgICAgICAgICB0ZXh0ID0gJyc7CiAgICAgICAgICAgICAgICB0aGF0LmhlYWRlci5zdGF0ZUZpZWxkID0gY29sdW1uLmZpZWxkOwogICAgICAgICAgICAgICAgdGhhdC5vcHRpb25zLnNpbmdsZVNlbGVjdCA9IHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGh0bWwucHVzaCh0ZXh0KTsKICAgICAgICAgICAgaHRtbC5wdXNoKCc8L2Rpdj4nKTsKICAgICAgICAgICAgaHRtbC5wdXNoKCc8ZGl2IGNsYXNzPSJmaHQtY2VsbCI+PC9kaXY+Jyk7CiAgICAgICAgICAgIGh0bWwucHVzaCgnPC90aD4nKTsKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy4kaGVhZGVyLmZpbmQoJ3RyJykuaHRtbChodG1sLmpvaW4oJycpKTsKICAgICAgICB0aGlzLiRoZWFkZXIuZmluZCgndGgnKS5lYWNoKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICAgICQodGhpcykuZGF0YSh2aXNpYmxlQ29sdW1uc1tpXSk7CgogICAgICAgICAgICBpZiAodmlzaWJsZUNvbHVtbnNbaV0uc29ydGFibGUpIHsKICAgICAgICAgICAgICAgICQodGhpcykub2ZmKCdjbGljaycpLm9uKCdjbGljaycsICQucHJveHkodGhhdC5vblNvcnQsIHRoYXQpKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5zaG93SGVhZGVyIHx8IHRoaXMub3B0aW9ucy5jYXJkVmlldykgewogICAgICAgICAgICB0aGlzLiRoZWFkZXIuaGlkZSgpOwogICAgICAgICAgICB0aGlzLiRjb250YWluZXIuZmluZCgnLmZpeGVkLXRhYmxlLWhlYWRlcicpLmhpZGUoKTsKICAgICAgICAgICAgdGhpcy4kbG9hZGluZy5jc3MoJ3RvcCcsIDApOwogICAgICAgIH0KCiAgICAgICAgdGhpcy4kc2VsZWN0QWxsID0gdGhpcy4kaGVhZGVyLmZpbmQoJ1tuYW1lPSJidFNlbGVjdEFsbCJdJyk7CiAgICAgICAgdGhpcy4kc2VsZWN0QWxsLm9mZignY2xpY2snKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBjaGVja2VkID0gJCh0aGlzKS5wcm9wKCdjaGVja2VkJyk7CiAgICAgICAgICAgIHRoYXRbY2hlY2tlZCA/ICdjaGVja0FsbCcgOiAndW5jaGVja0FsbCddKCk7CiAgICAgICAgfSk7CiAgICB9OwoKICAgIEJvb3RzdHJhcFRhYmxlLnByb3RvdHlwZS5pbml0RGF0YSA9IGZ1bmN0aW9uIChkYXRhLCBhcHBlbmQpIHsKICAgICAgICBpZiAoYXBwZW5kKSB7CiAgICAgICAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZGF0YS5jb25jYXQoZGF0YSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YSB8fCB0aGlzLm9wdGlvbnMuZGF0YTsKICAgICAgICB9CiAgICAgICAgdGhpcy5vcHRpb25zLmRhdGEgPSB0aGlzLmRhdGE7CgogICAgICAgIHRoaXMuaW5pdFNvcnQoKTsKICAgIH07CgogICAgQm9vdHN0cmFwVGFibGUucHJvdG90eXBlLmluaXRTb3J0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBuYW1lID0gdGhpcy5vcHRpb25zLnNvcnROYW1lLAogICAgICAgICAgICBvcmRlciA9IHRoaXMub3B0aW9ucy5zb3J0T3JkZXIgPT09ICdkZXNjJyA/IC0xIDogMSwKICAgICAgICAgICAgaW5kZXggPSAkLmluQXJyYXkodGhpcy5vcHRpb25zLnNvcnROYW1lLCB0aGlzLmhlYWRlci5maWVsZHMpOwoKICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgICAgICAgIHZhciBzb3J0ZXIgPSB0aGlzLmhlYWRlci5zb3J0ZXJzW2luZGV4XTsKICAgICAgICAgICAgdGhpcy5kYXRhLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc29ydGVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yZGVyICogc29ydGVyKGFbbmFtZV0sIGJbbmFtZV0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3J0ZXIgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yZGVyICogZXZhbChzb3J0ZXIgKyAnKGFbbmFtZV0sIGJbbmFtZV0pJyk7IC8vIGV2YWwgPwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChhW25hbWVdID09PSBiW25hbWVdKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoYVtuYW1lXSA8IGJbbmFtZV0pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JkZXIgKiAtMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBvcmRlcjsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfTsKCiAgICBCb290c3RyYXBUYWJsZS5wcm90b3R5cGUub25Tb3J0ID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyICR0aGlzID0gJChldmVudC5jdXJyZW50VGFyZ2V0KSwKICAgICAgICAgICAgJHRoaXNfID0gdGhpcy4kaGVhZGVyLmZpbmQoJ3RoJykuZXEoJHRoaXMuaW5kZXgoKSk7CgogICAgICAgIHRoaXMuJGhlYWRlci5hZGQodGhpcy4kaGVhZGVyXykuZmluZCgnc3Bhbi5vcmRlcicpLnJlbW92ZSgpOwogICAgICAgIHRoaXMub3B0aW9ucy5zb3J0TmFtZSA9ICR0aGlzLmRhdGEoJ2ZpZWxkJyk7CiAgICAgICAgdGhpcy5vcHRpb25zLnNvcnRPcmRlciA9ICR0aGlzLmRhdGEoJ29yZGVyJykgPT09ICdhc2MnID8gJ2Rlc2MnIDogJ2FzYyc7CiAgICAgICAgdGhpcy50cmlnZ2VyKCdzb3J0JywgdGhpcy5vcHRpb25zLnNvcnROYW1lLCB0aGlzLm9wdGlvbnMuc29ydE9yZGVyKTsKCiAgICAgICAgJHRoaXMuYWRkKCR0aGlzXykuZGF0YSgnb3JkZXInLCB0aGlzLm9wdGlvbnMuc29ydE9yZGVyKQogICAgICAgICAgICAuZmluZCgnLnRoLWlubmVyJykuYXBwZW5kKHRoaXMuZ2V0Q2FyZXRIdG1sKCkpOwoKICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNpZGVQYWdpbmF0aW9uID09PSAnc2VydmVyJykgewogICAgICAgICAgICB0aGlzLmluaXRTZXJ2ZXIoKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLmluaXRTb3J0KCk7CiAgICAgICAgdGhpcy5pbml0Qm9keSgpOwogICAgfTsKCiAgICBCb290c3RyYXBUYWJsZS5wcm90b3R5cGUuaW5pdFRvb2xiYXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHRoYXQgPSB0aGlzLAogICAgICAgICAgICBodG1sID0gW10sCiAgICAgICAgICAgIHRpbWVvdXRJZCA9IDAsCiAgICAgICAgICAgICRrZWVwT3BlbiwKICAgICAgICAgICAgJHNlYXJjaDsKCiAgICAgICAgdGhpcy4kdG9vbGJhciA9IHRoaXMuJGNvbnRhaW5lci5maW5kKCcuZml4ZWQtdGFibGUtdG9vbGJhcicpLmh0bWwoJycpOwoKICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy50b29sYmFyID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAkKCc8ZGl2IGNsYXNzPSJiYXJzIHB1bGwtbGVmdCI+PC9kaXY+JykKICAgICAgICAgICAgICAgIC5hcHBlbmRUbyh0aGlzLiR0b29sYmFyKQogICAgICAgICAgICAgICAgLmFwcGVuZCgkKHRoaXMub3B0aW9ucy50b29sYmFyKSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNob3dDb2x1bW5zKSB7CiAgICAgICAgICAgIGh0bWwgPSBbXTsKICAgICAgICAgICAgaHRtbC5wdXNoKCc8ZGl2IGNsYXNzPSJjb2x1bW5zIHB1bGwtcmlnaHQga2VlcC1vcGVuIj4nLAogICAgICAgICAgICAgICAgJzxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1kZWZhdWx0IGRyb3Bkb3duLXRvZ2dsZSIgZGF0YS10b2dnbGU9ImRyb3Bkb3duIj4nLAogICAgICAgICAgICAgICAgJzxpIGNsYXNzPSJnbHlwaGljb24gZ2x5cGhpY29uLXRoIGljb24tdGgiPjwvaT4nLAogICAgICAgICAgICAgICAgJyA8c3BhbiBjbGFzcz0iY2FyZXQiPjwvc3Bhbj4nLAogICAgICAgICAgICAgICAgJzwvYnV0dG9uPicsCiAgICAgICAgICAgICAgICAnPHVsIGNsYXNzPSJkcm9wZG93bi1tZW51IiByb2xlPSJtZW51Ij4nKTsKCiAgICAgICAgICAgICQuZWFjaCh0aGlzLm9wdGlvbnMuY29sdW1ucywgZnVuY3Rpb24gKGksIGNvbHVtbikgewogICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5yYWRpbyB8fCBjb2x1bW4uY2hlY2tib3gpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgY2hlY2tlZCA9IGNvbHVtbi52aXNpYmxlID8gJyBjaGVja2VkPSJjaGVja2VkIicgOiAnJzsKCiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnN3aXRjaGFibGUpIHsKICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goc3ByaW50ZignPGxpPicgKwogICAgICAgICAgICAgICAgICAgICAgICAnPGxhYmVsPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgdmFsdWU9IiVzIiVzPiAlczwvbGFiZWw+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICc8L2xpPicsIGksIGNoZWNrZWQsIGNvbHVtbi50aXRsZSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaHRtbC5wdXNoKCc8L3VsPicsCiAgICAgICAgICAgICAgICAnPC9kaXY+Jyk7CgogICAgICAgICAgICB0aGlzLiR0b29sYmFyLmFwcGVuZChodG1sLmpvaW4oJycpKTsKCiAgICAgICAgICAgICRrZWVwT3BlbiA9IHRoaXMuJHRvb2xiYXIuZmluZCgnLmtlZXAtb3BlbicpOwogICAgICAgICAgICAka2VlcE9wZW4uZmluZCgnbGknKS5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICRrZWVwT3Blbi5maW5kKCdpbnB1dCcpLm9mZignY2xpY2snKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLAogICAgICAgICAgICAgICAgICAgICRpdGVtcyA9ICRrZWVwT3Blbi5maW5kKCdpbnB1dCcpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpOwoKICAgICAgICAgICAgICAgIHRoYXQub3B0aW9ucy5jb2x1bW5zWyR0aGlzLnZhbCgpXS52aXNpYmxlID0gJHRoaXMucHJvcCgnY2hlY2tlZCcpOwogICAgICAgICAgICAgICAgdGhhdC5pbml0SGVhZGVyKCk7CiAgICAgICAgICAgICAgICB0aGF0LmluaXRCb2R5KCk7CiAgICAgICAgICAgICAgICBpZiAoJGl0ZW1zLmZpbHRlcignOmNoZWNrZWQnKS5sZW5ndGggPD0gdGhhdC5vcHRpb25zLm1pbmltdW5Db3VudENvbHVtbnMpIHsKICAgICAgICAgICAgICAgICAgICAkaXRlbXMuZmlsdGVyKCc6Y2hlY2tlZCcpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zZWFyY2gpIHsKICAgICAgICAgICAgaHRtbCA9IFtdOwogICAgICAgICAgICBodG1sLnB1c2goCiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0icHVsbC1yaWdodCBzZWFyY2giPicsCiAgICAgICAgICAgICAgICAgICAgc3ByaW50ZignPGlucHV0IGNsYXNzPSJmb3JtLWNvbnRyb2wiIHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSIlcyI+JywKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmZvcm1hdFNlYXJjaCgpKSwKICAgICAgICAgICAgICAgICc8L2Rpdj4nKTsKCiAgICAgICAgICAgIHRoaXMuJHRvb2xiYXIuYXBwZW5kKGh0bWwuam9pbignJykpOwogICAgICAgICAgICAkc2VhcmNoID0gdGhpcy4kdG9vbGJhci5maW5kKCcuc2VhcmNoIGlucHV0Jyk7CiAgICAgICAgICAgICRzZWFyY2gub2ZmKCdrZXl1cCcpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7IC8vIGRvZXNuJ3QgbWF0dGVyIGlmIGl0J3MgMAogICAgICAgICAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dCgkLnByb3h5KHRoYXQub25TZWFyY2gsIHRoYXQpLCA1MDAsIGV2ZW50KTsgLy8gNTAwbXMKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfTsKCiAgICBCb290c3RyYXBUYWJsZS5wcm90b3R5cGUub25TZWFyY2ggPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgdGhhdCA9IHRoaXMsCiAgICAgICAgICAgIHRleHQgPSAkLnRyaW0oJChldmVudC5jdXJyZW50VGFyZ2V0KS52YWwoKSk7CgogICAgICAgIGlmICh0ZXh0ID09PSB0aGlzLnNlYXJjaFRleHQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLnNlYXJjaFRleHQgPSB0ZXh0OwoKICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNpZGVQYWdpbmF0aW9uICE9PSAnc2VydmVyJykgewogICAgICAgICAgICB2YXIgcyA9IHRoYXQuc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpOwoKICAgICAgICAgICAgdGhpcy5kYXRhID0gJC5ncmVwKHRoaXMub3B0aW9ucy5kYXRhLCBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoKHR5cGVvZiBpdGVtW2tleV0gPT09ICdzdHJpbmcnIHx8CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBpdGVtW2tleV0gPT09ICdudW1iZXInKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAoaXRlbVtrZXldICsgJycpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHRoaXMub3B0aW9ucy5wYWdlTnVtYmVyID0gMTsKICAgICAgICB0aGlzLnVwZGF0ZVBhZ2luYXRpb24oKTsKICAgIH07CgogICAgQm9vdHN0cmFwVGFibGUucHJvdG90eXBlLmluaXRQYWdpbmF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuJHBhZ2luYXRpb24gPSB0aGlzLiRjb250YWluZXIuZmluZCgnLmZpeGVkLXRhYmxlLXBhZ2luYXRpb24nKTsKCiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMucGFnaW5hdGlvbikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciB0aGF0ID0gdGhpcywKICAgICAgICAgICAgaHRtbCA9IFtdLAogICAgICAgICAgICBpLCBmcm9tLCB0bywKICAgICAgICAgICAgJHBhZ2VMaXN0LAogICAgICAgICAgICAkZmlyc3QsICRwcmUsCiAgICAgICAgICAgICRuZXh0LCAkbGFzdCwKICAgICAgICAgICAgJG51bWJlciwKICAgICAgICAgICAgZGF0YSA9IHRoaXMuc2VhcmNoVGV4dCA/IHRoaXMuZGF0YSA6IHRoaXMub3B0aW9ucy5kYXRhOwoKICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNpZGVQYWdpbmF0aW9uICE9PSAnc2VydmVyJykgewogICAgICAgICAgICB0aGlzLm9wdGlvbnMudG90YWxSb3dzID0gZGF0YS5sZW5ndGg7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnRvdGFsUGFnZXMgPSAwOwogICAgICAgIGlmICh0aGlzLm9wdGlvbnMudG90YWxSb3dzKSB7CiAgICAgICAgICAgIHRoaXMudG90YWxQYWdlcyA9IH5+KCh0aGlzLm9wdGlvbnMudG90YWxSb3dzIC0gMSkgLyB0aGlzLm9wdGlvbnMucGFnZVNpemUpICsgMTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMudG90YWxQYWdlcyA+IDAgJiYgdGhpcy5vcHRpb25zLnBhZ2VOdW1iZXIgPiB0aGlzLnRvdGFsUGFnZXMpIHsKICAgICAgICAgICAgdGhpcy5vcHRpb25zLnBhZ2VOdW1iZXIgPSB0aGlzLnRvdGFsUGFnZXM7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnBhZ2VGcm9tID0gKHRoaXMub3B0aW9ucy5wYWdlTnVtYmVyIC0gMSkgKiB0aGlzLm9wdGlvbnMucGFnZVNpemUgKyAxOwogICAgICAgIHRoaXMucGFnZVRvID0gdGhpcy5vcHRpb25zLnBhZ2VOdW1iZXIgKiB0aGlzLm9wdGlvbnMucGFnZVNpemU7CiAgICAgICAgaWYgKHRoaXMucGFnZVRvID4gdGhpcy5vcHRpb25zLnRvdGFsUm93cykgewogICAgICAgICAgICB0aGlzLnBhZ2VUbyA9IHRoaXMub3B0aW9ucy50b3RhbFJvd3M7CiAgICAgICAgfQoKICAgICAgICBodG1sLnB1c2goCiAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJwdWxsLWxlZnQgcGFnaW5hdGlvbi1kZXRhaWwiPicsCiAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InBhZ2luYXRpb24taW5mbyI+JywKICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuZm9ybWF0U2hvd2luZ1Jvd3ModGhpcy5wYWdlRnJvbSwgdGhpcy5wYWdlVG8sIHRoaXMub3B0aW9ucy50b3RhbFJvd3MpLAogICAgICAgICAgICAgICAgJzwvc3Bhbj4nKTsKCiAgICAgICAgaHRtbC5wdXNoKCc8c3BhbiBjbGFzcz0icGFnZS1saXN0Ij4nKTsKCiAgICAgICAgdmFyIHBhZ2VOdW1iZXIgPSBbCiAgICAgICAgICAgICc8c3BhbiBjbGFzcz0iYnRuLWdyb3VwIGRyb3B1cCI+JywKICAgICAgICAgICAgJzxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1kZWZhdWx0IGRyb3Bkb3duLXRvZ2dsZSIgZGF0YS10b2dnbGU9ImRyb3Bkb3duIj4nLAogICAgICAgICAgICAnPHNwYW4gY2xhc3M9InBhZ2Utc2l6ZSI+JywKICAgICAgICAgICAgdGhpcy5vcHRpb25zLnBhZ2VTaXplLAogICAgICAgICAgICAnPC9zcGFuPicsCiAgICAgICAgICAgICcgPHNwYW4gY2xhc3M9ImNhcmV0Ij48L3NwYW4+JywKICAgICAgICAgICAgJzwvYnV0dG9uPicsCiAgICAgICAgICAgICc8dWwgY2xhc3M9ImRyb3Bkb3duLW1lbnUiIHJvbGU9Im1lbnUiPiddLAogICAgICAgICAgICBwYWdlTGlzdCA9IHRoaXMub3B0aW9ucy5wYWdlTGlzdDsKCiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMucGFnZUxpc3QgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHBhZ2VMaXN0ID0gZXZhbCh0aGlzLm9wdGlvbnMucGFnZUxpc3QpOwogICAgICAgIH0KCiAgICAgICAgJC5lYWNoKHBhZ2VMaXN0LCBmdW5jdGlvbiAoaSwgcGFnZSkgewogICAgICAgICAgICB2YXIgYWN0aXZlID0gcGFnZSA9PT0gdGhhdC5vcHRpb25zLnBhZ2VTaXplID8gJyBjbGFzcz0iYWN0aXZlIicgOiAnJzsKICAgICAgICAgICAgcGFnZU51bWJlci5wdXNoKHNwcmludGYoJzxsaSVzPjxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSI+JXM8L2E+PC9saT4nLCBhY3RpdmUsIHBhZ2UpKTsKICAgICAgICB9KTsKICAgICAgICBwYWdlTnVtYmVyLnB1c2goJzwvdWw+PC9zcGFuPicpOwoKICAgICAgICBodG1sLnB1c2godGhpcy5vcHRpb25zLmZvcm1hdFJlY29yZHNQZXJQYWdlKHBhZ2VOdW1iZXIuam9pbignJykpKTsKICAgICAgICBodG1sLnB1c2goJzwvc3Bhbj4nKTsKCiAgICAgICAgaHRtbC5wdXNoKCc8L2Rpdj4nLAogICAgICAgICAgICAnPGRpdiBjbGFzcz0icHVsbC1yaWdodCI+JywKICAgICAgICAgICAgICAgICc8dWwgY2xhc3M9InBhZ2luYXRpb24iPicsCiAgICAgICAgICAgICAgICAgICAgJzxsaSBjbGFzcz0icGFnZS1maXJzdCI+PGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIj4mbHQ7Jmx0OzwvYT48L2xpPicsCiAgICAgICAgICAgICAgICAgICAgJzxsaSBjbGFzcz0icGFnZS1wcmUiPjxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSI+Jmx0OzwvYT48L2xpPicpOwoKICAgICAgICBpZiAodGhpcy50b3RhbFBhZ2VzIDwgNSkgewogICAgICAgICAgICBmcm9tID0gMTsKICAgICAgICAgICAgdG8gPSB0aGlzLnRvdGFsUGFnZXM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZnJvbSA9IHRoaXMub3B0aW9ucy5wYWdlTnVtYmVyIC0gMjsKICAgICAgICAgICAgdG8gPSBmcm9tICsgNDsKICAgICAgICAgICAgaWYgKGZyb20gPCAxKSB7CiAgICAgICAgICAgICAgICBmcm9tID0gMTsKICAgICAgICAgICAgICAgIHRvID0gNTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodG8gPiB0aGlzLnRvdGFsUGFnZXMpIHsKICAgICAgICAgICAgICAgIHRvID0gdGhpcy50b3RhbFBhZ2VzOwogICAgICAgICAgICAgICAgZnJvbSA9IHRvIC0gNDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmb3IgKGkgPSBmcm9tOyBpIDw9IHRvOyBpKyspIHsKICAgICAgICAgICAgaHRtbC5wdXNoKCc8bGkgY2xhc3M9InBhZ2UtbnVtYmVyJyArIChpID09PSB0aGlzLm9wdGlvbnMucGFnZU51bWJlciA/ICcgYWN0aXZlJyA6ICcnKSArICciPicsCiAgICAgICAgICAgICAgICAnPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIj4nLCBpICwnPC9hPicsCiAgICAgICAgICAgICAgICAnPC9saT4nKTsKICAgICAgICB9CgogICAgICAgIGh0bWwucHVzaCgKICAgICAgICAgICAgICAgICAgICAnPGxpIGNsYXNzPSJwYWdlLW5leHQiPjxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSI+Jmd0OzwvYT48L2xpPicsCiAgICAgICAgICAgICAgICAgICAgJzxsaSBjbGFzcz0icGFnZS1sYXN0Ij48YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiPiZndDsmZ3Q7PC9hPjwvbGk+JywKICAgICAgICAgICAgICAgICc8L3VsPicsCiAgICAgICAgICAgICc8L2Rpdj4nKTsKCiAgICAgICAgdGhpcy4kcGFnaW5hdGlvbi5odG1sKGh0bWwuam9pbignJykpOwoKICAgICAgICAkcGFnZUxpc3QgPSB0aGlzLiRwYWdpbmF0aW9uLmZpbmQoJy5wYWdlLWxpc3QgYScpOwogICAgICAgICRmaXJzdCA9IHRoaXMuJHBhZ2luYXRpb24uZmluZCgnLnBhZ2UtZmlyc3QnKTsKICAgICAgICAkcHJlID0gdGhpcy4kcGFnaW5hdGlvbi5maW5kKCcucGFnZS1wcmUnKTsKICAgICAgICAkbmV4dCA9IHRoaXMuJHBhZ2luYXRpb24uZmluZCgnLnBhZ2UtbmV4dCcpOwogICAgICAgICRsYXN0ID0gdGhpcy4kcGFnaW5hdGlvbi5maW5kKCcucGFnZS1sYXN0Jyk7CiAgICAgICAgJG51bWJlciA9IHRoaXMuJHBhZ2luYXRpb24uZmluZCgnLnBhZ2UtbnVtYmVyJyk7CgogICAgICAgIGlmICh0aGlzLm9wdGlvbnMucGFnZU51bWJlciA8PSAxKSB7CiAgICAgICAgICAgICRmaXJzdC5hZGRDbGFzcygnZGlzYWJsZWQnKTsKICAgICAgICAgICAgJHByZS5hZGRDbGFzcygnZGlzYWJsZWQnKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wYWdlTnVtYmVyID49IHRoaXMudG90YWxQYWdlcykgewogICAgICAgICAgICAkbmV4dC5hZGRDbGFzcygnZGlzYWJsZWQnKTsKICAgICAgICAgICAgJGxhc3QuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7CiAgICAgICAgfQogICAgICAgICRwYWdlTGlzdC5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLm9uUGFnZUxpc3RDaGFuZ2UsIHRoaXMpKTsKICAgICAgICAkZmlyc3Qub2ZmKCdjbGljaycpLm9uKCdjbGljaycsICQucHJveHkodGhpcy5vblBhZ2VGaXJzdCwgdGhpcykpOwogICAgICAgICRwcmUub2ZmKCdjbGljaycpLm9uKCdjbGljaycsICQucHJveHkodGhpcy5vblBhZ2VQcmUsIHRoaXMpKTsKICAgICAgICAkbmV4dC5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLm9uUGFnZU5leHQsIHRoaXMpKTsKICAgICAgICAkbGFzdC5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLm9uUGFnZUxhc3QsIHRoaXMpKTsKICAgICAgICAkbnVtYmVyLm9mZignY2xpY2snKS5vbignY2xpY2snLCAkLnByb3h5KHRoaXMub25QYWdlTnVtYmVyLCB0aGlzKSk7CiAgICB9OwoKICAgIEJvb3RzdHJhcFRhYmxlLnByb3RvdHlwZS51cGRhdGVQYWdpbmF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMucmVzZXRSb3dzKCk7CiAgICAgICAgdGhpcy5pbml0UGFnaW5hdGlvbigpOwogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2lkZVBhZ2luYXRpb24gPT09ICdzZXJ2ZXInKSB7CiAgICAgICAgICAgIHRoaXMuaW5pdFNlcnZlcigpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuaW5pdEJvZHkoKTsKICAgICAgICB9CiAgICB9OwoKICAgIEJvb3RzdHJhcFRhYmxlLnByb3RvdHlwZS5vblBhZ2VMaXN0Q2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyICR0aGlzID0gJChldmVudC5jdXJyZW50VGFyZ2V0KTsKCiAgICAgICAgJHRoaXMucGFyZW50KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgIHRoaXMub3B0aW9ucy5wYWdlU2l6ZSA9ICskdGhpcy50ZXh0KCk7CiAgICAgICAgdGhpcy4kdG9vbGJhci5maW5kKCcucGFnZS1zaXplJykudGV4dCh0aGlzLm9wdGlvbnMucGFnZVNpemUpOwogICAgICAgIHRoaXMudXBkYXRlUGFnaW5hdGlvbigpOwogICAgfTsKCiAgICBCb290c3RyYXBUYWJsZS5wcm90b3R5cGUub25QYWdlRmlyc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5vcHRpb25zLnBhZ2VOdW1iZXIgPSAxOwogICAgICAgIHRoaXMudXBkYXRlUGFnaW5hdGlvbigpOwogICAgfTsKCiAgICBCb290c3RyYXBUYWJsZS5wcm90b3R5cGUub25QYWdlUHJlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMub3B0aW9ucy5wYWdlTnVtYmVyLS07CiAgICAgICAgdGhpcy51cGRhdGVQYWdpbmF0aW9uKCk7CiAgICB9OwoKICAgIEJvb3RzdHJhcFRhYmxlLnByb3RvdHlwZS5vblBhZ2VOZXh0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMub3B0aW9ucy5wYWdlTnVtYmVyKys7CiAgICAgICAgdGhpcy51cGRhdGVQYWdpbmF0aW9uKCk7CiAgICB9OwoKICAgIEJvb3RzdHJhcFRhYmxlLnByb3RvdHlwZS5vblBhZ2VMYXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMub3B0aW9ucy5wYWdlTnVtYmVyID0gdGhpcy50b3RhbFBhZ2VzOwogICAgICAgIHRoaXMudXBkYXRlUGFnaW5hdGlvbigpOwogICAgfTsKCiAgICBCb290c3RyYXBUYWJsZS5wcm90b3R5cGUub25QYWdlTnVtYmVyID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wYWdlTnVtYmVyID09PSArJChldmVudC5jdXJyZW50VGFyZ2V0KS50ZXh0KCkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLm9wdGlvbnMucGFnZU51bWJlciA9ICskKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnRleHQoKTsKICAgICAgICB0aGlzLnVwZGF0ZVBhZ2luYXRpb24oKTsKICAgIH07CgogICAgQm9vdHN0cmFwVGFibGUucHJvdG90eXBlLmluaXRCb2R5ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB0aGF0ID0gdGhpcywKICAgICAgICAgICAgaHRtbCA9IFtdLAogICAgICAgICAgICBkYXRhID0gdGhpcy5zZWFyY2hUZXh0ID8gdGhpcy5kYXRhIDogdGhpcy5vcHRpb25zLmRhdGE7CgogICAgICAgIHRoaXMuJGJvZHkgPSB0aGlzLiRlbC5maW5kKCd0Ym9keScpOwogICAgICAgIGlmICghdGhpcy4kYm9keS5sZW5ndGgpIHsKICAgICAgICAgICAgdGhpcy4kYm9keSA9ICQoJzx0Ym9keT48L3Rib2R5PicpLmFwcGVuZFRvKHRoaXMuJGVsKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2lkZVBhZ2luYXRpb24gPT09ICdzZXJ2ZXInKSB7CiAgICAgICAgICAgIGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5wYWdpbmF0aW9uIHx8IHRoaXMub3B0aW9ucy5zaWRlUGFnaW5hdGlvbiA9PT0gJ3NlcnZlcicpIHsKICAgICAgICAgICAgdGhpcy5wYWdlRnJvbSA9IDE7CiAgICAgICAgICAgIHRoaXMucGFnZVRvID0gZGF0YS5sZW5ndGg7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5wYWdlRnJvbSAtIDE7IGkgPCB0aGlzLnBhZ2VUbzsgaSsrKSB7CiAgICAgICAgICAgIHZhciBpdGVtID0gZGF0YVtpXSwKICAgICAgICAgICAgICAgIHN0eWxlID0ge30sCiAgICAgICAgICAgICAgICBjc3NlcyA9IFtdOwoKICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMucm93U3R5bGUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIHN0eWxlID0gdGhpcy5vcHRpb25zLnJvd1N0eWxlKGl0ZW0sIGkpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMucm93U3R5bGUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICBzdHlsZSA9IGV2YWwodGhpcy5vcHRpb25zLnJvd1N0eWxlICsgJyhpdGVtLCBpKScpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc3R5bGUgJiYgc3R5bGUuY3NzKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gc3R5bGUuY3NzKSB7CiAgICAgICAgICAgICAgICAgICAgY3NzZXMucHVzaChrZXkgKyAnOiAnICsgc3R5bGUuY3NzW2tleV0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBodG1sLnB1c2goJzx0cicsCiAgICAgICAgICAgICAgICBzcHJpbnRmKCcgY2xhc3M9IiVzIicsIHN0eWxlLmNsYXNzZXMpLAogICAgICAgICAgICAgICAgc3ByaW50ZignIGRhdGEtaW5kZXg9IiVzIicsIGkpLAogICAgICAgICAgICAgICAgJz4nCiAgICAgICAgICAgICk7CgogICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhcmRWaWV3KSB7CiAgICAgICAgICAgICAgICBodG1sLnB1c2goc3ByaW50ZignPHRkIGNvbHNwYW49IiVzIj4nLCB0aGlzLmhlYWRlci5maWVsZHMubGVuZ3RoKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICQuZWFjaCh0aGlzLmhlYWRlci5maWVsZHMsIGZ1bmN0aW9uIChqLCBmaWVsZCkgewogICAgICAgICAgICAgICAgdmFyIHRleHQgPSAnJywKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGl0ZW1bZmllbGRdLAogICAgICAgICAgICAgICAgICAgIHR5cGUgPSAnJywKICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IHNwcmludGYoJ3N0eWxlPSIlcyInLCBjc3Nlcy5jb25jYXQodGhhdC5oZWFkZXIuc3R5bGVzW2pdKS5qb2luKCc7ICcpKTsKCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoYXQuaGVhZGVyLmZvcm1hdHRlcnNbal0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoYXQuaGVhZGVyLmZvcm1hdHRlcnNbal0odmFsdWUsIGl0ZW0sIGkpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhhdC5oZWFkZXIuZm9ybWF0dGVyc1tqXSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGV2YWwodGhhdC5oZWFkZXIuZm9ybWF0dGVyc1tqXSArICcodmFsdWUsIGl0ZW0sIGkpJyk7IC8vIGV2YWwgPwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh0aGF0Lm9wdGlvbnMuY29sdW1uc1tqXS5jaGVja2JveCB8fCB0aGF0Lm9wdGlvbnMuY29sdW1uc1tqXS5yYWRpbykgewogICAgICAgICAgICAgICAgICAgIHR5cGUgPSB0aGF0Lm9wdGlvbnMuY29sdW1uc1tqXS5jaGVja2JveCA/ICdjaGVja2JveCcgOiB0eXBlOwogICAgICAgICAgICAgICAgICAgIHR5cGUgPSB0aGF0Lm9wdGlvbnMuY29sdW1uc1tqXS5yYWRpbyA/ICdyYWRpbycgOiB0eXBlOwoKICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gWyc8dGQgY2xhc3M9ImJzLWNoZWNrYm94Ij4nLAogICAgICAgICAgICAgICAgICAgICAgICAnPGlucHV0JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpbnRmKCcgZGF0YS1pbmRleD0iJXMiJywgaSkgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByaW50ZignIG5hbWU9IiVzIicsIHRoYXQub3B0aW9ucy5zZWxlY3RJdGVtTmFtZSkgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByaW50ZignIHR5cGU9IiVzIicsIHR5cGUpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmludGYoJyB2YWx1ZT0iJXMiJywgaXRlbVt0aGF0Lm9wdGlvbnMuaWRGaWVsZF0pICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmludGYoJyBjaGVja2VkPSIlcyInLCB2YWx1ZSA/ICdjaGVja2VkJyA6IHVuZGVmaW5lZCkgKyAnIC8+JywKICAgICAgICAgICAgICAgICAgICAgICAgJzwvdGQ+J10uam9pbignJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/IHRoYXQub3B0aW9ucy51bmRlZmluZWRUZXh0IDogdmFsdWU7CgogICAgICAgICAgICAgICAgICAgIHRleHQgPSB0aGF0Lm9wdGlvbnMuY2FyZFZpZXcgPwogICAgICAgICAgICAgICAgICAgICAgICBbJzxkaXYgY2xhc3M9ImNhcmQtdmlldyI+JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmludGYoJzxzcGFuIGNsYXNzPSJ0aXRsZSIgJXM+JXM8L3NwYW4+Jywgc3R5bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UHJvcGVydHlGcm9tT3RoZXIodGhhdC5vcHRpb25zLmNvbHVtbnMsICdmaWVsZCcsICd0aXRsZScsIGZpZWxkKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpbnRmKCc8c3BhbiBjbGFzcz0idmFsdWUiPiVzPC9zcGFuPicsIHZhbHVlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nXS5qb2luKCcnKSA6CiAgICAgICAgICAgICAgICAgICAgICAgIFtzcHJpbnRmKCc8dGQgJXM+Jywgc3R5bGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC90ZD4nXS5qb2luKCcnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBodG1sLnB1c2godGV4dCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYXJkVmlldykgewogICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8L3RkPicpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBodG1sLnB1c2goJzwvdHI+Jyk7CiAgICAgICAgfQoKICAgICAgICAvLyBzaG93IG5vIHJlY29yZHMKICAgICAgICBpZiAoIWh0bWwubGVuZ3RoKSB7CiAgICAgICAgICAgIGh0bWwucHVzaCgnPHRyIGNsYXNzPSJuby1yZWNvcmRzLWZvdW5kIj4nLAogICAgICAgICAgICAgICAgc3ByaW50ZignPHRkIGNvbHNwYW49IiVzIj4lczwvdGQ+JywgdGhpcy5oZWFkZXIuZmllbGRzLmxlbmd0aCwgdGhpcy5vcHRpb25zLmZvcm1hdE5vTWF0Y2hlcygpKSwKICAgICAgICAgICAgICAgICc8L3RyPicpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy4kYm9keS5odG1sKGh0bWwuam9pbignJykpOwoKICAgICAgICB0aGlzLiRjb250YWluZXIuZmluZCgnLmZpeGVkLXRhYmxlLWJvZHknKS5zY3JvbGxUb3AoMCk7CgogICAgICAgIHRoaXMuJGJvZHkuZmluZCgndHInKS5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGF0LnRyaWdnZXIoJ2NsaWNrLXJvdycsIHRoYXQuZGF0YVskKHRoaXMpLmRhdGEoJ2luZGV4JyldLCAkKHRoaXMpKTsKICAgICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5jbGlja1RvU2VsZWN0KSB7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoc3ByaW50ZignW25hbWU9IiVzIl0nLCB0aGF0Lm9wdGlvbnMuc2VsZWN0SXRlbU5hbWUpKS50cmlnZ2VyKCdjbGljaycpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kYm9keS5maW5kKCd0cicpLm9mZignZGJsY2xpY2snKS5vbignZGJsY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoYXQudHJpZ2dlcignZGJsLWNsaWNrLXJvdycsIHRoYXQuZGF0YVskKHRoaXMpLmRhdGEoJ2luZGV4JyldLCAkKHRoaXMpKTsKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy4kc2VsZWN0SXRlbSA9IHRoaXMuJGJvZHkuZmluZChzcHJpbnRmKCdbbmFtZT0iJXMiXScsIHRoaXMub3B0aW9ucy5zZWxlY3RJdGVtTmFtZSkpOwogICAgICAgIHRoaXMuJHNlbGVjdEl0ZW0ub2ZmKCdjbGljaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgdmFyIGNoZWNrQWxsID0gdGhhdC4kc2VsZWN0SXRlbS5sZW5ndGggPT09IHRoYXQuJHNlbGVjdEl0ZW0uZmlsdGVyKCc6Y2hlY2tlZCcpLmxlbmd0aCwKICAgICAgICAgICAgICAgIGNoZWNrZWQgPSAkKHRoaXMpLnByb3AoJ2NoZWNrZWQnKSB8fCAkKHRoaXMpLmlzKCc6cmFkaW8nKSwKICAgICAgICAgICAgICAgIHJvdyA9IHRoYXQuZGF0YVskKHRoaXMpLmRhdGEoJ2luZGV4JyldOwoKICAgICAgICAgICAgdGhhdC4kc2VsZWN0QWxsLmFkZCh0aGF0LiRzZWxlY3RBbGxfKS5wcm9wKCdjaGVja2VkJywgY2hlY2tBbGwpOwogICAgICAgICAgICByb3dbdGhhdC5oZWFkZXIuc3RhdGVGaWVsZF0gPSBjaGVja2VkOwogICAgICAgICAgICB0aGF0LnRyaWdnZXIoY2hlY2tlZCA/ICdjaGVjaycgOiAndW5jaGVjaycsIHJvdyk7CgogICAgICAgICAgICBpZiAodGhhdC5vcHRpb25zLnNpbmdsZVNlbGVjdCkgewogICAgICAgICAgICAgICAgdGhhdC4kc2VsZWN0SXRlbS5ub3QodGhpcykuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdGhhdC5kYXRhWyQodGhpcykuZGF0YSgnaW5kZXgnKV1bdGhhdC5oZWFkZXIuc3RhdGVGaWVsZF0gPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhhdC4kc2VsZWN0SXRlbS5maWx0ZXIoJzpjaGVja2VkJykubm90KHRoaXMpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7CiAgICAgICAgICAgIH0KCi8vICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCd0cicpW2NoZWNrZWQgPyAnYWRkQ2xhc3MnIDogJ3JlbW92ZUNsYXNzJ10oJ3NlbGVjdGVkJyk7CiAgICAgICAgfSk7CgogICAgICAgICQuZWFjaCh0aGlzLmhlYWRlci5ldmVudHMsIGZ1bmN0aW9uIChpLCBldmVudHMpIHsKICAgICAgICAgICAgaWYgKCFldmVudHMpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50cyA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgIGV2ZW50cyA9IGV2YWwoZXZlbnRzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZXZlbnRzKSB7CiAgICAgICAgICAgICAgICB0aGF0LiRib2R5LmZpbmQoJ3RyJykuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyICR0ciA9ICQodGhpcyksCiAgICAgICAgICAgICAgICAgICAgICAgICR0ZCA9ICR0ci5maW5kKCd0ZCcpLmVxKGkpLAogICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGtleS5pbmRleE9mKCcgJyksCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSBrZXkuc3Vic3RyaW5nKDAsIGluZGV4KSwKICAgICAgICAgICAgICAgICAgICAgICAgZWwgPSBrZXkuc3Vic3RyaW5nKGluZGV4ICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSBldmVudHNba2V5XTsKCiAgICAgICAgICAgICAgICAgICAgJHRkLmZpbmQoZWwpLm9mZihuYW1lKS5vbihuYW1lLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAkdHIuZGF0YSgnaW5kZXgnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdyA9IHRoYXQuZGF0YVtpbmRleF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJvd1t0aGF0LmhlYWRlci5maWVsZHNbaV1dOwoKICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyhlLCB2YWx1ZSwgcm93LCBpbmRleCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICB0aGlzLnJlc2V0VmlldygpOwogICAgfTsKCiAgICBCb290c3RyYXBUYWJsZS5wcm90b3R5cGUuaW5pdFNlcnZlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgdGhhdCA9IHRoaXMsCiAgICAgICAgICAgIGRhdGEgPSB7fSwKICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMub3B0aW9ucy5wYWdlU2l6ZSwKICAgICAgICAgICAgICAgIHBhZ2VOdW1iZXI6IHRoaXMub3B0aW9ucy5wYWdlTnVtYmVyLAogICAgICAgICAgICAgICAgc2VhcmNoVGV4dDogdGhpcy5zZWFyY2hUZXh0LAogICAgICAgICAgICAgICAgc29ydE5hbWU6IHRoaXMub3B0aW9ucy5zb3J0TmFtZSwKICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogdGhpcy5vcHRpb25zLnNvcnRPcmRlcgogICAgICAgICAgICB9OwoKICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy51cmwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLiRsb2FkaW5nLnNob3coKTsKCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5xdWVyeVBhcmFtc1R5cGUgPT09ICdsaW1pdCcpIHsKICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgICAgbGltaXQ6IHBhcmFtcy5wYWdlU2l6ZSwKICAgICAgICAgICAgICAgIG9mZnNldDogcGFyYW1zLnBhZ2VTaXplICogKHBhcmFtcy5wYWdlTnVtYmVyIC0gMSksCiAgICAgICAgICAgICAgICBzZWFyY2g6IHBhcmFtcy5zZWFyY2hUZXh0LAogICAgICAgICAgICAgICAgc29ydDogcGFyYW1zLnNvcnROYW1lLAogICAgICAgICAgICAgICAgb3JkZXI6IHBhcmFtcy5zb3J0T3JkZXIKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMucXVlcnlQYXJhbXMgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgZGF0YSA9IHRoaXMub3B0aW9ucy5xdWVyeVBhcmFtcyhwYXJhbXMpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5xdWVyeVBhcmFtcyA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgZGF0YSA9IGV2YWwodGhpcy5vcHRpb25zLnF1ZXJ5UGFyYW1zICsgJyhwYXJhbXMpJyk7CiAgICAgICAgfQoKICAgICAgICAkLmFqYXgoewogICAgICAgICAgICB0eXBlOiB0aGlzLm9wdGlvbnMubWV0aG9kLAogICAgICAgICAgICB1cmw6IHRoaXMub3B0aW9ucy51cmwsCiAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiB0aGlzLm9wdGlvbnMuY29udGVudFR5cGUsCiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsCiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhhdC5vcHRpb25zLnJlc3BvbnNlSGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgIHJlcyA9IHRoYXQub3B0aW9ucy5yZXNwb25zZUhhbmRsZXIocmVzKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoYXQub3B0aW9ucy5yZXNwb25zZUhhbmRsZXIgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzID0gZXZhbCh0aGF0Lm9wdGlvbnMucmVzcG9uc2VIYW5kbGVyICsgJyhyZXMpJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXM7CgogICAgICAgICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5zaWRlUGFnaW5hdGlvbiA9PT0gJ3NlcnZlcicpIHsKICAgICAgICAgICAgICAgICAgICB0aGF0Lm9wdGlvbnMudG90YWxSb3dzID0gcmVzLnRvdGFsOwogICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXMucm93czsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoYXQubG9hZChkYXRhKTsKICAgICAgICAgICAgICAgIHRoYXQudHJpZ2dlcignbG9hZC1zdWNjZXNzJywgZGF0YSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICB0aGF0LnRyaWdnZXIoJ2xvYWQtZXJyb3InLCByZXMuc3RhdHVzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHRoYXQuJGxvYWRpbmcuaGlkZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9OwoKICAgIEJvb3RzdHJhcFRhYmxlLnByb3RvdHlwZS5nZXRDYXJldEh0bWwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIFsnPHNwYW4gY2xhc3M9Im9yZGVyJyArICh0aGlzLm9wdGlvbnMuc29ydE9yZGVyID09PSAnZGVzYycgPyAnJyA6ICcgZHJvcHVwJykgKyAnIj4nLAogICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJjYXJldCIgc3R5bGU9Im1hcmdpbjogMTBweCA1cHg7Ij48L3NwYW4+JywKICAgICAgICAgICAgJzwvc3Bhbj4nXS5qb2luKCcnKTsKICAgIH07CgogICAgQm9vdHN0cmFwVGFibGUucHJvdG90eXBlLnVwZGF0ZVJvd3MgPSBmdW5jdGlvbiAoY2hlY2tlZCkgewogICAgICAgIHZhciB0aGF0ID0gdGhpczsKCiAgICAgICAgdGhpcy4kc2VsZWN0SXRlbS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhhdC5kYXRhWyQodGhpcykuZGF0YSgnaW5kZXgnKV1bdGhhdC5oZWFkZXIuc3RhdGVGaWVsZF0gPSBjaGVja2VkOwogICAgICAgIH0pOwogICAgfTsKCiAgICBCb290c3RyYXBUYWJsZS5wcm90b3R5cGUucmVzZXRSb3dzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB0aGF0ID0gdGhpczsKCiAgICAgICAgJC5lYWNoKHRoaXMuZGF0YSwgZnVuY3Rpb24gKGksIHJvdykgewogICAgICAgICAgICB0aGF0LiRzZWxlY3RBbGwucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTsKICAgICAgICAgICAgdGhhdC4kc2VsZWN0SXRlbS5wcm9wKCdjaGVja2VkJywgZmFsc2UpOwogICAgICAgICAgICByb3dbdGhhdC5oZWFkZXIuc3RhdGVGaWVsZF0gPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH07CgogICAgQm9vdHN0cmFwVGFibGUucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKCiAgICAgICAgbmFtZSArPSAnLmJzLnRhYmxlJzsKICAgICAgICB0aGlzLm9wdGlvbnNbQm9vdHN0cmFwVGFibGUuRVZFTlRTW25hbWVdXS5hcHBseSh0aGlzLm9wdGlvbnMsIGFyZ3MpOwogICAgICAgIHRoaXMuJGVsLnRyaWdnZXIoJC5FdmVudChuYW1lKSwgYXJncyk7CgogICAgICAgIHRoaXMub3B0aW9ucy5vbkFsbChuYW1lLCBhcmdzKTsKICAgICAgICB0aGlzLiRlbC50cmlnZ2VyKCQuRXZlbnQoJ2FsbC5icy50YWJsZScpLCBbbmFtZSwgYXJnc10pOwogICAgfTsKCiAgICBCb290c3RyYXBUYWJsZS5wcm90b3R5cGUucmVzZXRIZWFkZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHRoYXQgPSB0aGlzLAogICAgICAgICAgICAkZml4ZWRIZWFkZXIgPSB0aGlzLiRjb250YWluZXIuZmluZCgnLmZpeGVkLXRhYmxlLWhlYWRlcicpLAogICAgICAgICAgICAkZml4ZWRCb2R5ID0gdGhpcy4kY29udGFpbmVyLmZpbmQoJy5maXhlZC10YWJsZS1ib2R5JyksCiAgICAgICAgICAgIHNjcm9sbFdpZHRoID0gdGhpcy4kZWwud2lkdGgoKSA+ICRmaXhlZEJvZHkud2lkdGgoKSA/IGdldFNjcm9sbGJhcldpZHRoKCkgOiAwOwoKICAgICAgICAvLyBmaXggIzYxOiB0aGUgaGlkZGVuIHRhYmxlIHJlc2V0IGhlYWRlciBidWcuCiAgICAgICAgaWYgKHRoaXMuJGVsLmlzKCc6aGlkZGVuJykpIHsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkXyk7IC8vIGRvZXNuJ3QgbWF0dGVyIGlmIGl0J3MgMAogICAgICAgICAgICB0aGlzLnRpbWVvdXRJZF8gPSBzZXRUaW1lb3V0KCQucHJveHkodGhpcy5yZXNldEhlYWRlciwgdGhpcyksIDEwMCk7IC8vIDEwMG1zCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHRoaXMuJGhlYWRlcl8gPSB0aGlzLiRoZWFkZXIuY2xvbmUodHJ1ZSk7CiAgICAgICAgdGhpcy4kc2VsZWN0QWxsXyA9IHRoaXMuJGhlYWRlcl8uZmluZCgnW25hbWU9ImJ0U2VsZWN0QWxsIl0nKTsKICAgICAgICB0aGlzLiRlbC5jc3MoJ21hcmdpbi10b3AnLCAtdGhpcy4kaGVhZGVyLmhlaWdodCgpKTsKCiAgICAgICAgLy8gZml4IGJ1ZzogZ2V0ICRlbC5jc3MoJ3dpZHRoJykgZXJyb3Igc29tZXRpbWUgKGhlaWdodCA9IDUwMCkKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgJGZpeGVkSGVhZGVyLmNzcyh7CiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJzM3cHgnLAogICAgICAgICAgICAgICAgJ2JvcmRlci1ib3R0b20nOiAnMXB4IHNvbGlkICNkZGRkZGQnLAogICAgICAgICAgICAgICAgJ21hcmdpbi1yaWdodCc6IHNjcm9sbFdpZHRoCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuZmluZCgndGFibGUnKS5jc3MoJ3dpZHRoJywgdGhhdC4kZWwuY3NzKCd3aWR0aCcpKQogICAgICAgICAgICAgICAgLmh0bWwoJycpLmF0dHIoJ2NsYXNzJywgdGhhdC4kZWwuYXR0cignY2xhc3MnKSkKICAgICAgICAgICAgICAgIC5hcHBlbmQodGhhdC4kaGVhZGVyXyk7CgogICAgICAgICAgICB0aGF0LiRib2R5LmZpbmQoJ3RyOmZpcnN0LWNoaWxkOm5vdCgubm8tcmVjb3Jkcy1mb3VuZCkgPiAqJykuZWFjaChmdW5jdGlvbihpKSB7CiAgICAgICAgICAgICAgICB0aGF0LiRoZWFkZXJfLmZpbmQoJ2Rpdi5maHQtY2VsbCcpLmVxKGkpLndpZHRoKCQodGhpcykuaW5uZXJXaWR0aCgpKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBob3Jpem9udGFsIHNjcm9sbCBldmVudAogICAgICAgICAgICAkZml4ZWRCb2R5Lm9mZignc2Nyb2xsJykub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICRmaXhlZEhlYWRlci5zY3JvbGxMZWZ0KCQodGhpcykuc2Nyb2xsTGVmdCgpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9OwoKICAgIC8vIFBVQkxJQyBGVU5DVElPTiBERUZJTklUSU9OCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PQoKICAgIEJvb3RzdHJhcFRhYmxlLnByb3RvdHlwZS5yZXNldFZpZXcgPSBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgdmFyIHRoYXQgPSB0aGlzLAogICAgICAgICAgICBoZWFkZXIgPSB0aGlzLmhlYWRlcjsKCiAgICAgICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMuaGVpZ2h0KSB7CiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5oZWlnaHQgPSBwYXJhbXMuaGVpZ2h0OwogICAgICAgIH0KCiAgICAgICAgdGhpcy4kc2VsZWN0QWxsLnByb3AoJ2NoZWNrZWQnLCB0aGlzLiRzZWxlY3RJdGVtLmxlbmd0aCA+IDAgJiYKICAgICAgICAgICAgdGhpcy4kc2VsZWN0SXRlbS5sZW5ndGggPT09IHRoaXMuJHNlbGVjdEl0ZW0uZmlsdGVyKCc6Y2hlY2tlZCcpLmxlbmd0aCk7CgogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaGVpZ2h0KSB7CiAgICAgICAgICAgIHZhciB0b29sYmFySGVpZ2h0ID0gK3RoaXMuJHRvb2xiYXIuY2hpbGRyZW4oKS5vdXRlckhlaWdodCh0cnVlKSwKICAgICAgICAgICAgICAgIHBhZ2luYXRpb25IZWlnaHQgPSArdGhpcy4kcGFnaW5hdGlvbi5jaGlsZHJlbigpLm91dGVySGVpZ2h0KHRydWUpLAogICAgICAgICAgICAgICAgaGVpZ2h0ID0gdGhpcy5vcHRpb25zLmhlaWdodCAtIHRvb2xiYXJIZWlnaHQgLSBwYWdpbmF0aW9uSGVpZ2h0OwoKICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyLmZpbmQoJy5maXhlZC10YWJsZS1jb250YWluZXInKS5jc3MoJ2hlaWdodCcsIGhlaWdodCArICdweCcpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYXJkVmlldykgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNob3dIZWFkZXIgJiYgdGhpcy5vcHRpb25zLmhlaWdodCkgewogICAgICAgICAgICB0aGlzLnJlc2V0SGVhZGVyKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5vcHRpb25zLmhlaWdodCAmJiB0aGlzLm9wdGlvbnMuc2hvd0hlYWRlcikgewogICAgICAgICAgICB0aGlzLiRjb250YWluZXIuZmluZCgnLmZpeGVkLXRhYmxlLWNvbnRhaW5lcicpLmNzcygncGFkZGluZy1ib3R0b20nLCAnMzdweCcpOwogICAgICAgIH0KICAgIH07CgogICAgQm9vdHN0cmFwVGFibGUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHRoaXMuaW5pdERhdGEoZGF0YSk7CiAgICAgICAgdGhpcy5pbml0UGFnaW5hdGlvbigpOwogICAgICAgIHRoaXMuaW5pdEJvZHkoKTsKICAgIH07CgogICAgQm9vdHN0cmFwVGFibGUucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgdGhpcy5pbml0RGF0YShkYXRhLCB0cnVlKTsKICAgICAgICB0aGlzLmluaXRCb2R5KCk7CiAgICB9OwoKICAgIEJvb3RzdHJhcFRhYmxlLnByb3RvdHlwZS5tZXJnZUNlbGxzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgICAgICB2YXIgcm93ID0gb3B0aW9ucy5pbmRleCwKICAgICAgICAgICAgY29sID0gJC5pbkFycmF5KG9wdGlvbnMuZmllbGQsIHRoaXMuaGVhZGVyLmZpZWxkcyksCiAgICAgICAgICAgIHJvd3NwYW4gPSBvcHRpb25zLnJvd3NwYW4gfHwgMSwKICAgICAgICAgICAgY29sc3BhbiA9IG9wdGlvbnMuY29sc3BhbiB8fCAxLAogICAgICAgICAgICBpLCBqLAogICAgICAgICAgICAkdHIgPSB0aGlzLiRib2R5LmZpbmQoJ3RyJyksCiAgICAgICAgICAgICR0ZCA9ICR0ci5lcShyb3cpLmZpbmQoJ3RkJykuZXEoY29sKTsKCiAgICAgICAgaWYgKHJvdyA8IDAgfHwgY29sIDwgMCB8fCByb3cgPj0gdGhpcy5kYXRhLmxlbmd0aCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBmb3IgKGkgPSByb3c7IGkgPCByb3cgKyByb3dzcGFuOyBpKyspIHsKICAgICAgICAgICAgZm9yIChqID0gY29sOyBqIDwgY29sICsgY29sc3BhbjsgaisrKSB7CiAgICAgICAgICAgICAgICAkdHIuZXEoaSkuZmluZCgndGQnKS5lcShqKS5oaWRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICR0ZC5hdHRyKCdyb3dzcGFuJywgcm93c3BhbikuYXR0cignY29sc3BhbicsIGNvbHNwYW4pLnNob3coKTsKICAgIH07CgogICAgQm9vdHN0cmFwVGFibGUucHJvdG90eXBlLmdldFNlbGVjdGlvbnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHRoYXQgPSB0aGlzOwoKICAgICAgICByZXR1cm4gJC5ncmVwKHRoaXMuZGF0YSwgZnVuY3Rpb24gKHJvdykgewogICAgICAgICAgICByZXR1cm4gcm93W3RoYXQuaGVhZGVyLnN0YXRlRmllbGRdOwogICAgICAgIH0pOwogICAgfTsKCiAgICBCb290c3RyYXBUYWJsZS5wcm90b3R5cGUuY2hlY2tBbGwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy4kc2VsZWN0QWxsLmFkZCh0aGlzLiRzZWxlY3RBbGxfKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7CiAgICAgICAgdGhpcy4kc2VsZWN0SXRlbS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7CiAgICAgICAgdGhpcy51cGRhdGVSb3dzKHRydWUpOwogICAgICAgIHRoaXMudHJpZ2dlcignY2hlY2stYWxsJyk7CiAgICB9OwoKICAgIEJvb3RzdHJhcFRhYmxlLnByb3RvdHlwZS51bmNoZWNrQWxsID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuJHNlbGVjdEFsbC5hZGQodGhpcy4kc2VsZWN0QWxsXykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTsKICAgICAgICB0aGlzLiRzZWxlY3RJdGVtLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7CiAgICAgICAgdGhpcy51cGRhdGVSb3dzKGZhbHNlKTsKICAgICAgICB0aGlzLnRyaWdnZXIoJ3VuY2hlY2stYWxsJyk7CiAgICB9OwoKICAgIEJvb3RzdHJhcFRhYmxlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuJGVsLmluc2VydEJlZm9yZSh0aGlzLiRjb250YWluZXIpOwogICAgICAgICQodGhpcy5vcHRpb25zLnRvb2xiYXIpLmluc2VydEJlZm9yZSh0aGlzLiRlbCk7CiAgICAgICAgdGhpcy4kY29udGFpbmVyLm5leHQoKS5yZW1vdmUoKTsKICAgICAgICB0aGlzLiRjb250YWluZXIucmVtb3ZlKCk7CiAgICAgICAgdGhpcy4kZWwuaHRtbCh0aGlzLiRlbF8uaHRtbCgpKQogICAgICAgICAgICAuYXR0cignY2xhc3MnLCB0aGlzLiRlbF8uYXR0cignY2xhc3MnKSB8fCAnJyk7IC8vIHJlc2V0IHRoZSBjbGFzcwogICAgfTsKCiAgICBCb290c3RyYXBUYWJsZS5wcm90b3R5cGUuc2hvd0xvYWRpbmcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy4kbG9hZGluZy5zaG93KCk7CiAgICB9OwoKICAgIEJvb3RzdHJhcFRhYmxlLnByb3RvdHlwZS5oaWRlTG9hZGluZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLiRsb2FkaW5nLmhpZGUoKTsKICAgIH07CgogICAgQm9vdHN0cmFwVGFibGUucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5pbml0U2VydmVyKCk7CiAgICB9OwoKCiAgICAvLyBCT09UU1RSQVAgVEFCTEUgUExVR0lOIERFRklOSVRJT04KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09CgogICAgJC5mbi5ib290c3RyYXBUYWJsZSA9IGZ1bmN0aW9uIChvcHRpb24sIF9yZWxhdGVkVGFyZ2V0KSB7CiAgICAgICAgdmFyIGFsbG93ZWRNZXRob2RzID0gWwogICAgICAgICAgICAgICAgJ2dldFNlbGVjdGlvbnMnLAogICAgICAgICAgICAgICAgJ2xvYWQnLCAnYXBwZW5kJywgJ21lcmdlQ2VsbHMnLAogICAgICAgICAgICAgICAgJ2NoZWNrQWxsJywgJ3VuY2hlY2tBbGwnLAogICAgICAgICAgICAgICAgJ2Rlc3Ryb3knLCAncmVzZXRWaWV3JywKICAgICAgICAgICAgICAgICdzaG93TG9hZGluZycsICdoaWRlTG9hZGluZycsCiAgICAgICAgICAgICAgICAncmVmcmVzaCcKICAgICAgICAgICAgXSwKICAgICAgICAgICAgdmFsdWU7CgogICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksCiAgICAgICAgICAgICAgICBkYXRhID0gJHRoaXMuZGF0YSgnYm9vdHN0cmFwLnRhYmxlJyksCiAgICAgICAgICAgICAgICBvcHRpb25zID0gJC5leHRlbmQoe30sIEJvb3RzdHJhcFRhYmxlLkRFRkFVTFRTLCAkdGhpcy5kYXRhKCksIHR5cGVvZiBvcHRpb24gPT09ICdvYmplY3QnICYmIG9wdGlvbik7CgogICAgICAgICAgICBpZiAoIWRhdGEpIHsKICAgICAgICAgICAgICAgICR0aGlzLmRhdGEoJ2Jvb3RzdHJhcC50YWJsZScsIChkYXRhID0gbmV3IEJvb3RzdHJhcFRhYmxlKHRoaXMsIG9wdGlvbnMpKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgaWYgKCQuaW5BcnJheShvcHRpb24sIGFsbG93ZWRNZXRob2RzKSA8IDApIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyAiVW5rbm93biBtZXRob2Q6ICIgKyBvcHRpb247CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YWx1ZSA9IGRhdGFbb3B0aW9uXShfcmVsYXRlZFRhcmdldCk7CgogICAgICAgICAgICAgICAgaWYgKG9wdGlvbiA9PT0gJ2Rlc3Ryb3knKSB7CiAgICAgICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlRGF0YSgnYm9vdHN0cmFwLnRhYmxlJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyB0aGlzIDogdmFsdWU7CiAgICB9OwoKICAgICQuZm4uYm9vdHN0cmFwVGFibGUuQ29uc3RydWN0b3IgPSBCb290c3RyYXBUYWJsZTsKICAgICQuZm4uYm9vdHN0cmFwVGFibGUuZGVmYXVsdHMgPSBCb290c3RyYXBUYWJsZS5ERUZBVUxUUzsKICAgICQuZm4uYm9vdHN0cmFwVGFibGUuY29sdW1uRGVmYXVsdHMgPSBCb290c3RyYXBUYWJsZS5DT0xVTU5fREVGQVVMVFM7CgogICAgLy8gQk9PVFNUUkFQIFRBQkxFIElOSVQKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09CgogICAgJChmdW5jdGlvbiAoKSB7CiAgICAgICAgJCgnW2RhdGEtdG9nZ2xlPSJ0YWJsZSJdJykuYm9vdHN0cmFwVGFibGUoKTsKICAgIH0pOwoKfShqUXVlcnkpOwo=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="5123421" offset="0" length="1408" />
        <PacketInfo time="5123421" offset="1408" length="1408" />
        <PacketInfo time="5123421" offset="2816" length="1408" />
        <PacketInfo time="5123421" offset="4224" length="260" />
        <PacketInfo time="5123421" offset="4484" length="1408" />
        <PacketInfo time="5123421" offset="5892" length="1408" />
        <PacketInfo time="5123437" offset="7300" length="1408" />
        <PacketInfo time="5123437" offset="8708" length="51" />
        <PacketInfo time="5123437" offset="8759" length="111" />
        <PacketInfo time="5123437" offset="8870" length="5" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>